# JPHP-DiscordRPC-ext

Библиотека на основе которой собрано [Vatuu/discord-rpc](https://github.com/Vatuu/discord-rpc)

##### Как пользоваться:

1. Чтобы использовать пакет вам надо создать приложение в [discord](https://discord.com/developers/applications).
2. Название `игры \ приложения` - это название вашего приложения, вы его можете в любой момент поменять в настройках по ссылку в 1 пункте.
3. Чтобы ваше приложение отображало иконку, надо загрузить изображения в "Rich Presence", загружаете и даете ID вашей картинке (может не сразу работать, у меня только через пару минут начало подгружать ее)

```php
$discord->setBigImage("ID картинки что вы указали");
```

##### Простой пример
```php
$discord = new DiscordRPC($appId);

// заголовок если исопльзуется метод setParty 
$discord->setState("Игроков на сервере");

// hint - не обязательно указывать
$discord->setBigImage("BImage", "hint");
$discord->setSmallImage("SImageDefault", "hint");

// Подзагловок
$discord->setDetails("...");

// я не до конца разобрался для чего первый аргумент (вообще не разбирался, понятно что это ID но как с ним работать без понятия)
// по этому можно указать все что угодно
$discord->setParty("ID", 15, 60);

// нужен чтобы отображалось сколько времени вы провели в вашем приложении
$discord->setStartTimestamp((Time::now())->getTime());

$discord->updateState();
```

<br><br>
Callback события в основном бесполезные тут (имхо конечно), единственное для которого есть применение это `DiscordRPC::EVENT_READY` т.к. там возвращается объект User с данными (ну может кому-то захочется статистику делать, или там бан по ID сделать)
```php
$discord->on(DiscordRPC::EVENT_READY, function (User $user) {
    // пример формирования ссылки для получения аватара
    // $avatar = "https://cdn.discordapp.com/avatars/" . $user->getId() . "/" . $user->getAvatar() . ".png";
    var_dump($user->getName());
});
```
<br><br>
Теперь по методам которые вряд ли кто-то будет использовать
<br>
```setEndTimestamp``` - принимает значение будущего, для обратного отсчета (время до закрытия лобби и прочие моменты когда нужно вывести информацию об каком то ограниченном событии)
<br>
```setSecrets``` - без понятия для чего он, думал может чтото в стиле создания ID для метода ```setParty``` но хз, может и не для этого ¯\\_(ツ)_/¯


##### Подключение пакета через jphp
```
 jppm add jphp-discord-rpc-ext@git+https://github.com/silentdeath76/JPHP-DiscordRPC-ext
```